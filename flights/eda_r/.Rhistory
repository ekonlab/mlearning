g13
g13 = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3)
g13
g12
g13 = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + xlim(25,85) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3)
g13
g13 = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + xlim(25,85) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + ggtitle("Percentage of rural and urban population by country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g13
g13_bis = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,85) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + ggtitle("Percentage of rural and urban population by country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g13_bis
g13_bis
g14 =  ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + facet_wrap(~region)
g14
g14 =  ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + facet_wrap(~region)
g14
g14 =  ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_point() + facet_wrap(~region)
g14
g14 =  ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_point(alpha = 0.4) + facet_wrap(~region)
g14
g14 =  ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_point(alpha = 0.4) + facet_wrap(~region) + ggtitle("Percentage of rural and urban population by country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g14
g14 =  ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_point(alpha = 0.4) + facet_wrap(~region) + ggtitle("Percentage of rural and urban population by region and country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g14
sub_sa = last_df %>%
filter(region == "Sub-Saharan Africa")
g15 =  ggplot(sub_sa,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop))  + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3)
g15
g15 =  ggplot(sub_sa,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop))  + theme_minimal() + geom_point() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3)
g15
g15 =  ggplot(sub_sa,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop))  + theme_minimal() + geom_point(alpha = 0.4) + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3)
g15
g15 =  ggplot(sub_sa,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop))  + theme_minimal() + geom_point(alpha = 0.4) + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + ggtitle("Percentage of rural and urban population by region and country (sub-saharan africa countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g15
g1
g1
g14
g15
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
natgeo_water = read.csv("natgeo_water_refined.csv")
eth_df = natgeo_water %>%
filter(iso == "ETH")
# And now we are going to build our first line chart to try to answer the question
g1 = ggplot(eth_df,aes(year,rural_water_imp_per)) + geom_line() + theme_minimal() + ggtitle("Percentage of rural population in Ethiopia with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g1
head(natgeo_water)
head(natgeo_water)
str(natgeo_water)
g1
g2 = ggplot(natgeo_water,aes(year,rural_water_imp_per,group=country)) + geom_line(alpha = 0.4) + theme_minimal()  + ggtitle("Percentage of rural population by country with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g2
g3 = ggplot(natgeo_water,aes(year,rural_water_imp_per,group = country)) + geom_line(alpha=0.4) + facet_wrap(~region) + theme_minimal() + ggtitle("Percentage of rural population by country and region with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g3
sub_saharan_df = natgeo_water %>%
filter(region == "Sub-Saharan Africa")
str(sub_saharan_df)
g4 = ggplot(sub_saharan_init,aes(country,rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g4
g4 = ggplot(sub_saharan_init,aes(x = reorder(country-value),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g4
g4 = ggplot(sub_saharan_init,aes(x = reorder(country,-value),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g4
g4 = ggplot(sub_saharan_init,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g4
g4 + coord_flip()
g4 + coord_flip()
sub_saharan_last = sub_saharan_df %>%
filter(year == 2015)
str(sub_saharan_last)
g5 = ggplot(sub_saharan_last,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g5
g5 + coord_flip()
g5 + coord_flip()
years = c(1990,2015)
sub_saharan_compare = sub_saharan_df %>%
filter(year %in% years)
sub_saharan_compare$year = as.factor(as.numeric(sub_saharan_compare$year))
g6 = ggplot(sub_saharan_compare,aes(country,rural_water_imp_per,fill=year)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g6
g6 = ggplot(sub_saharan_compare,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per,fill=year)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g6
g6 + coord_flip()
g6 + coord_flip()
g6
g6 + coord_flip()
g6 + coord_flip()
g7 = ggplot(sub_saharan_compare,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per,fill=year)) + geom_bar(position ="dodge", stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g7
g7
g7 + coord_flip()
g7 + coord_flip()
g8 = ggplot(sub_saharan_compare,aes(x = reorder(country,-rural_water_imp_per),rural_water_imp_per,fill=year)) + geom_bar(position ="fill", stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g8
g8 + coord_flip()
g8 + coord_flip()
g9 = ggplot(natgeo_water,aes(rural_water_imp_per,urban_water_imp_per)) + geom_point() + theme_minimal()  + ggtitle("Percentage of rural and urban population by country with access to clean water from 1990 to 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g9
g10 = ggplot(natgeo_water,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point() + theme_minimal() + scale_size(range=c(1,14)) + ggtitle("Percentage of rural and urban population by country with access to clean water from 1990 to 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g10
g11 = ggplot(natgeo_water,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + scale_size(range=c(1,14)) + ggtitle("Percentage of rural and urban population by country with access to clean water from 1990 to 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g11
last_df = natgeo_water %>%
filter(year == 2015)
g12 = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + scale_size(range=c(1,12)) + xlim(0,100) + ylim(0,100) + ggtitle("Percentage of rural and urban population by country with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g12
g13 = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + xlim(25,85) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + ggtitle("Percentage of rural and urban population by country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g13
g13_bis = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,85) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + ggtitle("Percentage of rural and urban population by country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g13_bis
g13_bis
g14 =  ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_point(alpha = 0.4) + facet_wrap(~region) + ggtitle("Percentage of rural and urban population by region and country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g14
sub_sa = last_df %>%
filter(region == "Sub-Saharan Africa")
g15 =  ggplot(sub_sa,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop))  + theme_minimal() + geom_point(alpha = 0.4) + xlim(25,90) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + ggtitle("Percentage of rural and urban population by region and country (sub-saharan africa countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g15
g12
g13
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
natgeo_water = read.csv("natgeo_water_refined.csv")
g1 = ggplot(eth_df,aes(year,rural_water_imp_per)) + geom_line() + theme_minimal() + ggtitle("Percentage of rural population in Ethiopia with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g1
g1
g2 = ggplot(natgeo_water,aes(year,rural_water_imp_per,group=country)) + geom_line(alpha = 0.4) + theme_minimal()  + ggtitle("Percentage of rural population by country with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g2
g3 = ggplot(natgeo_water,aes(year,rural_water_imp_per,group = country)) + geom_line(alpha=0.4) + facet_wrap(~region) + theme_minimal() + ggtitle("Percentage of rural population by country and region with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g3
g3
g4 = ggplot(sub_saharan_init,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g4
g10 = ggplot(natgeo_water,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point() + theme_minimal() + scale_size(range=c(1,14)) + ggtitle("Percentage of rural and urban population by country with access to clean water from 1990 to 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g10
g10
last_df = natgeo_water %>%
filter(year == 2015)
g12 = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + geom_point(alpha = 0.4) + theme_minimal() + scale_size(range=c(1,12)) + xlim(0,100) + ylim(0,100) + ggtitle("Percentage of rural and urban population by country with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g12
g13_bis = ggplot(last_df,aes(rural_water_imp_per,urban_water_imp_per,size=total_pop)) + theme_minimal() + xlim(25,85) + ylim(50,100) + scale_size(range=c(2,12)) + geom_text(aes(label=country),size=3) + ggtitle("Percentage of rural and urban population by country (selected countries) with access to clean water in 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g13_bis
g13_bis
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
# Import Natgeo water data set and have a initial overiew
natgeo_water = read.csv("natgeo_water_refined.csv")
str(natgeo_water)
eth_df = natgeo_water %>%
filter(iso == "ETH")
sub_saharan_df = natgeo_water %>%
filter(region == "Sub-Saharan Africa")
sub_saharan_init = sub_saharan_df %>%
filter(year == 1990)
g4 = ggplot(sub_saharan_init,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g4
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
natgeo_water = read.csv("natgeo_water_refined.csv")
str(natgeo_water)
eth_df = natgeo_water %>%
filter(iso == "ETH")
sub_saharan_df = natgeo_water %>%
filter(region == "Sub-Saharan Africa")
sub_saharan_init = sub_saharan_df %>%
filter(year == 1990)
sub_saharan_last = sub_saharan_df %>%
filter(year == 2015)
g5 = ggplot(sub_saharan_last,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g5
g6 = ggplot(sub_saharan_compare,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per,fill=year)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g6
217*2
560/217
g9 = ggplot(natgeo_water,aes(rural_water_imp_per,urban_water_imp_per)) + geom_point() + theme_minimal()  + ggtitle("% of rural and urban population by country with access to clean water from 1990 to 2015") +  xlab("% of rural population with access to clean water") + ylab("% of urban population with access to clean water")
g9
g9
200*0.9
200*0.1
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
# Import Natgeo water data set and have a initial overiew
natgeo_water = read.csv("natgeo_water_refined.csv")
eth_df = natgeo_water %>%
filter(iso == "ETH")
# And now we are going to build our first line chart to try to answer the question
g1 = ggplot(eth_df,aes(year,rural_water_imp_per)) + geom_line() + theme_minimal() + ggtitle("Percentage of rural population in Ethiopia with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g1
g1
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
# Import Natgeo water data set and have a initial overiew
natgeo_water = read.csv("natgeo_water_refined.csv")
eth_df = natgeo_water %>%
filter(iso == "ETH")
sub_saharan_df = natgeo_water %>%
filter(region == "Sub-Saharan Africa")
sub_saharan_init = sub_saharan_df %>%
filter(year == 1990)
sub_saharan_last = sub_saharan_df %>%
filter(year == 2015)
years = c(1990,2015)
sub_saharan_compare = sub_saharan_df %>%
filter(year %in% years)
sub_saharan_compare$year = as.factor(as.numeric(sub_saharan_compare$year))
head(sub_saharan_compare)
g6 = ggplot(sub_saharan_compare,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per,fill=year)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g6
compare_df = sub_saharan_compare %>%
select("country","year","rural_water_imp_per")
head(compare_df)
compare_df = sub_saharan_compare %>%
select("country","rural_water_imp_per","year")
compare_df = sub_saharan_compare %>%
head(compare_df)
# Convert year to wide format using "gather"
# formula = (data,key,value,columns_to_gather)
compare_df_wide = gather(compare_df,"year","value",3)
?gather()
library(tidyr)
# Convert year to wide format using "gather"
# formula = (data,key,value,columns_to_gather)
compare_df_wide = gather(compare_df,"year","value",3)
head(compare_df_wide)
# Convert year to wide format using "gather"
# formula = (data,key,value,columns_to_gather)
compare_df_wide = gather(compare_df,"year","value",2:3)
head(compare_df_wide)
compare_df = sub_saharan_compare %>%
select("country","rural_water_imp_per","year")
head(compare_df)
compare_df = sub_saharan_compare %>%
select("country","year","rural_water_imp_per")
# Convert year to wide format using "gather"
# formula = (data,key,value,columns_to_gather)
compare_df_wide = gather(compare_df,"year","value",2:3)
head(compare_df_wide)
# GATHER = WHEN THERE IS COLUMNS WHICH ARE NOT VARIABLES (FROM WIDE TO LONG)
# formula = (data,key,value,columns_to_gather)
tidy.cases = gather(cases, "year", "n", 2:4)
cases
library(EDAWR)
compare_df = sub_saharan_compare %>%
select("country","year","rural_water_imp_per")
head(compare_df)
# Convert year to wide format using "spread"
# formula = (data,key,value)
compare_df_wide = spred(compare_df,"year","rural_water_imp_per")
# Convert year to wide format using "spread"
# formula = (data,key,value)
compare_df_wide = spread(compare_df,"year","rural_water_imp_per")
head(compare_df_wide)
compare_df_wide$diff = compare_df_wide$`2015` - compare_df_wide$`1990`
head(compare_df_wide)
head(compare_df_wide)
compare_df_wide
g3
g5_b = ggplot(compare_df_wide,aes(x = reorder(country,-diff),y = doff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g5_b
g5_b = ggplot(compare_df_wide,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990 and 2015") +  xlab("countries") + ylab("% of rural population with access to clean water")
g5_b
g5_b = ggplot(compare_df_wide,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("% of rural population in Sub-Saharan Africa countries with access to clean water (2015 - 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g5_b
g5_b + coord_flip()
g5_b + coord_flip()
g5_b = ggplot(compare_df_wide,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("% of rural population in Sub-Saharan Africa countries with access to clean water (2015 - 1990)") +  xlab("countries") + ylab("% 2015 - % 1990")
g5_b
g5_b + coord_flip()
g5_b + coord_flip()
g3
years_2 = c(1995,2019)
sub_saharan_compare_2 = sub_saharan_df %>%
filter(year %in% years_2)
sub_saharan_compare_2$year = as.factor(as.numeric(sub_saharan_compare_2$year))
head(sub_saharan_compare_2)
compare_df_2 = sub_saharan_compare_2 %>%
select("country","year","rural_water_imp_per")
# Convert year to wide format using "spread"
# formula = (data,key,value)
compare_df_wide_2 = spread(compare_df_2,"year","rural_water_imp_per")
compare_df_wide_2$diff = compare_df_wide_2$`2010` - compare_df_wide_2$`1995`
head(compare_df_wide_2)
years_2 = c(1995,2010)
sub_saharan_compare_2 = sub_saharan_df %>%
filter(year %in% years_2)
sub_saharan_compare_2$year = as.factor(as.numeric(sub_saharan_compare_2$year))
compare_df_2 = sub_saharan_compare_2 %>%
select("country","year","rural_water_imp_per")
compare_df_wide_2 = spread(compare_df_2,"year","rural_water_imp_per")
compare_df_wide_2$diff = compare_df_wide_2$`2010` - compare_df_wide_2$`1995`
head(compare_df_wide_2)
head(compare_df_wide_2)
compare_df_wide_2
g3
g5_c = ggplot(compare_df_wide_2,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("% of rural population in Sub-Saharan Africa countries with access to clean water (2010 - 1995)") +  xlab("countries") + ylab("% 2010 - % 1995")
g5_c
g5_c
g5_c + coord_flip()
g5_c + coord_flip()
g5_c + coord_flip()
g5_b + coord_flip()
g5_c + coord_flip()
39.75*6
357,75+119,75
357.75+119.75
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
library(tidyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
# Import Natgeo water data set and have a initial overiew
natgeo_water = read.csv("natgeo_water_refined.csv")
head(natgeo_water)
eth_df = natgeo_water %>%
filter(iso == "ETH")
# And now we are going to build our first line chart to try to answer the question
g1 = ggplot(eth_df,aes(year,rural_water_imp_per)) + geom_line() + theme_minimal() + ggtitle("Percentage of rural population in Ethiopia with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g1
g1
sub_saharan_init = sub_saharan_df %>%
filter(year == 1990)
sub_saharan_last = sub_saharan_df %>%
filter(year == 2015)
years = c(1990,2015)
sub_saharan_compare = sub_saharan_df %>%
filter(year %in% years)
sub_saharan_compare$year = as.factor(as.numeric(sub_saharan_compare$year))
compare_df = sub_saharan_compare %>%
select("country","year","rural_water_imp_per")
# Convert year to wide format using "spread"
# formula = (data,key,value)
compare_df_wide = spread(compare_df,"year","rural_water_imp_per")
compare_df_wide$diff = compare_df_wide$`2015` - compare_df_wide$`1990`
head(compare_df_wide)
g5_b = ggplot(compare_df_wide,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("% of rural population in Sub-Saharan Africa countries with access to clean water (2015 - 1990)") +  xlab("countries") + ylab("% 2015 - % 1990")
g5_b
g5_b + coord_flip()
g5_b + coord_flip()
years_2 = c(1995,2010)
sub_saharan_compare_2 = sub_saharan_df %>%
filter(year %in% years_2)
sub_saharan_compare_2$year = as.factor(as.numeric(sub_saharan_compare_2$year))
compare_df_wide_2 = spread(compare_df_2,"year","rural_water_imp_per")
compare_df_wide_2$diff = compare_df_wide_2$`2010` - compare_df_wide_2$`1995`
head(compare_df_wide_2)
g5_c = ggplot(compare_df_wide_2,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("% of rural population in Sub-Saharan Africa countries with access to clean water (2010 - 1995)") +  xlab("countries") + ylab("% 2010 - % 1995")
g5_c
g5_c + coord_flip()
g5_c + coord_flip()
g5_c + coord_flip()
knitr::opts_chunk$set(echo = TRUE)
options(scipen=999) # avoid scientic notation
# Set up current directory
library(ggplot2)
library(dplyr)
library(tidyr)
setwd("/Users/albertogonzalez/Dropbox/work_17/bestiario/Mark")
# Import Natgeo water data set and have a initial overiew
natgeo_water = read.csv("natgeo_water_refined.csv")
str(natgeo_water)
eth_df = natgeo_water %>%
filter(iso == "ETH")
# And now we are going to build our first line chart to try to answer the question
g1 = ggplot(eth_df,aes(year,rural_water_imp_per)) + geom_line() + theme_minimal() + ggtitle("Percentage of rural population in Ethiopia with access to clean water from 1990 to 2015") +  xlab("years") + ylab("% of rural population with access to clean water")
g1
g1
sub_saharan_df = natgeo_water %>%
filter(region == "Sub-Saharan Africa")
sub_saharan_init = sub_saharan_df %>%
filter(year == 1990)
g4 = ggplot(sub_saharan_init,aes(x = reorder(country,-rural_water_imp_per),y = rural_water_imp_per)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("Percentage of rural population in Sub-Saharan Africa countries with access to clean water in 1990") +  xlab("countries") + ylab("% of rural population with access to clean water")
g4
sub_saharan_last = sub_saharan_df %>%
filter(year == 2015)
years = c(1990,2015)
sub_saharan_compare = sub_saharan_df %>%
filter(year %in% years)
sub_saharan_compare$year = as.factor(as.numeric(sub_saharan_compare$year))
select("country","year","rural_water_imp_per")
compare_df = sub_saharan_compare %>%
select("country","year","rural_water_imp_per")
# Convert year to wide format using "spread"
# formula = (data,key,value)
compare_df_wide = spread(compare_df,"year","rural_water_imp_per")
compare_df_wide$diff = compare_df_wide$`2015` - compare_df_wide$`1990`
g5_b = ggplot(compare_df_wide,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("% of rural population in Sub-Saharan Africa countries with access to clean water (2015 - 1990)") +  xlab("countries") + ylab("% 2015 - % 1990")
g5_b
years_2 = c(1995,2010)
sub_saharan_compare_2 = sub_saharan_df %>%
filter(year %in% years_2)
sub_saharan_compare_2$year = as.factor(as.numeric(sub_saharan_compare_2$year))
compare_df_2 = sub_saharan_compare_2 %>%
select("country","year","rural_water_imp_per")
# Convert year to wide format using "spread"
# formula = (data,key,value)
compare_df_wide_2 = spread(compare_df_2,"year","rural_water_imp_per")
compare_df_wide_2$diff = compare_df_wide_2$`2010` - compare_df_wide_2$`1995`
head(compare_df_wide_2)
g5_c = ggplot(compare_df_wide_2,aes(x = reorder(country,-diff),y = diff)) + geom_bar(stat = "identity") + theme_minimal() + ggtitle("% of rural population in Sub-Saharan Africa countries with access to clean water (2010 - 1995)") +  xlab("countries") + ylab("% 2010 - % 1995")
g5_c
knitr::opts_chunk$set(echo = TRUE)
library(rjson)
library(dplyr)
setwd("/Users/albertogonzalez/Documents/GitHub/mlearning/flights/middle_east")
# Load first file
input_file = fromJSON(file="flights.json")
df1 = as.data.frame(input_file)
str(df1)
# Load first file
input_file = fromJSON(file="flights.json",nullValue = NA)
# Load first file
input_file = fromJSON(file="flights.json")
# Convert to dataframe
df = do.call("rbind.fill", lapply(json_data, as.data.frame))
# Convert to dataframe
df = do.call("rbind.fill", lapply(input_file, as.data.frame))
library(plyr)
knitr::opts_chunk$set(echo = TRUE)
library(rjson)
library(plyr)
library(dplyr)
library(tidyr)
library(ggmap)
library(ggplot2)
setwd("/Users/albertogonzalez/Documents/GitHub/mlearning/flights/eda_r")
list.files()
list.files()
input_file = fromJSON(file="02-13_22.24.json")
# Convert to dataframe
df = do.call("rbind.fill", lapply(input_file, as.data.frame))
str(df)
knitr::opts_chunk$set(out.width="750px", dpi=300)
# load planes_features data
planes <- read_csv("data/planes_features.csv")
library(readr)
library(dplyr)
library(randomForest)
# load planes_features data
planes <- read_csv("data/planes_features.csv")
planes <- planes %>%
mutate(type2=as.integer(as.factor(type)))
head(planes)
str(planes)
train <- read_csv("data/train.csv") %>%
inner_join(planes, by="adshex")
head(train)
str(train)
train[1]
train[1,]
train_df = as.data.frame(train)
head(train_df)
str(planes)
str(train)
table(train$class)
setwd("/Users/albertogonzalez/Documents/GitHub/mlearning/flights/classification")
write.csv(x = train,file = "train.csv",row.names = FALSE)
head(train)
head(train_df)
str(df)
# Get needed variables
df_1 = df[,c("adshex","flight_id","lat","lng","alt","speed","squawk","type","timestamp","track","s_airport","t_airport")]
head(df_1)
df_1 = df[,c("adshex","flight_id","lat","lng","alt","speed","squawk","type","IATA","timestamp","track","s_airport","t_airport")]
head(df_1)
head(df)
head(planes)
head(planes_df)
planes_df = as.data.frame(planes)
head(planes_df)
dim(planes_df)
u_flights = unique(df_1$adshex)
length(u_flights)
head(u_flights)
# Filter one and plot it (lat - lon)
one_flight = df_1 %>%
filter(adshex=="1053f4b3")
str(one_flight)
head(one_flight)
head(one_flight)
str(one_flight)
getwd()
setwd("/Users/albertogonzalez/Documents/GitHub/mlearning/flights/ade_r")
setwd("/Users/albertogonzalez/Documents/GitHub/mlearning/flights/eda_r")
getwd()
str(df_1)
str(df)
df_1 = df[,c("adshex","flight_id","lat","lng","alt","speed","squawk","type","IATA","timestamp","track","s_airport","t_airport","OACI")]
str(df_1)
write.csv(x = df_1,file = "flights_output_take_one.csv",row.names = FALSE)
